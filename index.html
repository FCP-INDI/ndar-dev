<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Ndar-dev by FCP-INDI</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/FCP-INDI/ndar-dev">View On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/FCP-INDI/ndar-dev/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/FCP-INDI/ndar-dev/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>Ndar-dev</h1>
          <p>Software development for NDAR</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/FCP-INDI">FCP-INDI</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></span>
        </div>

        <h1>
<a id="ndar-dev" class="anchor" href="#ndar-dev" aria-hidden="true"><span class="octicon octicon-link"></span></a>ndar-dev</h1>

<p>This repository contains the code used to preprocess data from the NDAR database and upload the results/log files to tables in the database.</p>

<h2>
<a id="contents" class="anchor" href="#contents" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contents</h2>

<ul>
<li>act_interface.py - Nipype interface made to work with the ANTs cortical thickness extraction script found <a href="https://raw.githubusercontent.com/stnava/ANTs/master/Scripts/antsCorticalThickness.sh">here</a>
</li>
<li>aws_walkthrough.md - Instructions on how to use AWS EC2 to launch and interact with a C-PAC AMI.</li>
<li>check_entries.py - A quality control script that analyzes results in the miNDAR tables and determines if they are complete or need to be added/deleted.</li>
<li>credentials_template.csv - A template for how the fetch_creds.py module expects in order to read in credentials and use them for python interfaces to various AWS services</li>
<li>fetch_creds.py - A python module which reads in a csv file (e.g. credentials_template) and uses this information to create variables and objects used in interfacing with AWS via python.</li>
<li>ndar_act_run.py - Streamlined script to execute the nipype workflow from the interface defined in act_interface.py and then upload the results and log files to the NDAR database. This script is designed to be launched from a cluster of C-PAC AMI's on AWS using the Sun Grid Engine job scheduler.</li>
<li>ndar_run.sge - Bash script to use to submit the ndar_act_cluster.py script in parallel over a cluster of nodes.</li>
<li>ndar_unpack - Bash-executable Python script which will download and extract imaging data from the NDAR database. Originally cloned from <a href="https://raw.githubusercontent.com/chaselgrove/ndar/master/ndar_unpack/ndar_unpack">here</a>, but slightly modified to add untar-ing functionality.</li>
<li>act_sublist_build.py - Template subject list builder script which will query the IMAGE03 database table and pull down a range of image03_id's and their corresponding S3 path entries to build a subject list. This subject list can then be used to run ndar_act_run.py for ANTs cortical thickness processing.</li>
<li>
<p>ndar_cpac_sublist.py - Script which builds a C-PAC-compatible subject list from an NDAR DB instance. For this script to work, one must have the following in a csv file so that this script can interact with the AWS cloud-hosted database:</p>

<ul>
<li>Database username</li>
<li>Database password</li>
<li>Database host URL</li>
<li>Database port number</li>
<li>Database service id</li>
</ul>

<p>This information is given from the NDAR website when you launch a miNDAR instance from the miNDAR tab on NDAR's <a href="https://ndar.nih.gov/launch_cloud_db.html">cloud page</a>. To see a template of the csv file format, see the credentials_template.csv file in this repository. </p>

<p>Additionally, the miNDAR database instance must be launched so the user can connect to it (via an internet connection). This is also done on NDAR's <a href="https://ndar.nih.gov/launch_cloud_db.html">cloud page</a>. <em>Note that the network ports of your internet connetion must allow communication through the database port number of the miNDAR instance (aka not firewalled).</em></p>

<p>The rest of the arguments to this function are completely up to the user (see the ndar_cpac_sublist.py docstring for more info).</p>
</li>
</ul>

<p>The OASIS template data files can be acquired from <a href="http://mindboggle.info">Mindboggle</a> using this <a href="http://mindboggle.info/data/templates/atropos/OASIS-30_Atropos_template.tar.gz">link</a> and this <a href="http://mindboggle.info/data/atlases/jointfusion/OASIS-TRT-20_jointfusion_DKT31_CMA_labels_in_OASIS-30.nii.gz">link</a>.</p>

<h2>
<a id="dependencies" class="anchor" href="#dependencies" aria-hidden="true"><span class="octicon octicon-link"></span></a>Dependencies</h2>

<p>Python depenencies:</p>

<ul>
<li>
<a href="http://boto.readthedocs.org/en/latest/">Boto</a> - Python package for interacting with Amazon Web Services.</li>
<li>
<a href="http://cx-oracle.readthedocs.org/en/latest/index.html">cx_Oracle</a> - Python package for interacting with Oracle databases.</li>
<li>
<a href="http://nipy.org/nibabel/api.html">Nibabel</a> - Python package for read/write access to various neuroimaging data formats.</li>
<li>
<a href="http://nipy.sourceforge.net/nipype/documentation.html">Nipype</a> - Python package for Neuroimaging data analysis pipelines.</li>
<li>
<a href="http://docs.scipy.org/doc/numpy/reference/">Numpy</a> - Python package for fast numerical computations.</li>
<li>
<a href="http://pyyaml.org/wiki/PyYAMLDocumentation">PyYaml</a> - Python package for parsing and emitting Yaml files.</li>
<li>
<a href="https://code.google.com/p/pydicom/">pydicom</a> - Python package for working with DICOM files.</li>
</ul>

<p>Software dependencies:</p>

<ul>
<li>
<a href="http://stnava.github.io/ANTs/">ANTs</a> - A popular medical image registration and segmentation toolkit.</li>
<li>
<a href="http://surfer.nmr.mgh.harvard.edu/">FreeSurfer</a> - An open source software suite for processing and analyzing (human) brain MRI images.</li>
<li>
<a href="http://fsl.fmrib.ox.ac.uk/fsl/fslwiki/">FSL</a> - A comprehensive library of analysis tools for FMRI, MRI and DTI brain imaging data.</li>
<li>
<a href="https://github.com/BIC-MNI/minc-tools/">minc-tools</a> - Package of utilities that work on MINC format images.</li>
<li>
<a href="http://www.oracle.com/technetwork/database/features/instant-client/index-097480.html">Oracle Instant Client</a> - A set of tools to interact with Oracle databases. Only the basic-lite, sdk, and sql packages need to be installed.</li>
</ul>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>